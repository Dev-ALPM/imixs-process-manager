<f:subview xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:i="http://xmlns.jcp.org/jsf/composite/imixs">


	<div class="imixs-panel">
		<h3>#{message.workflow}</h3>


		<!-- **** Workflow Actions only visible if user is autor ***** -->
		<ui:fragment
			rendered="#{empty workflowController.workitem.item['$lastevent'] or workflowController.workitem.item['$isauthor']}">
			<i:imixsWorkflowActions workflowController="#{workflowController}"
				disabletooltip="false" />
		</ui:fragment>
		<ui:fragment
			rendered="#{!(empty workflowController.workitem.item['$lastevent'] or workflowController.workitem.item['$isauthor'])}">
			<p style="color:red">You are not allowed to edit this Workitem!</p>
		</ui:fragment>

		<h:commandButton value="#{message.close}"
			action="/pages/welcome?faced-redirect=true"
			actionListener="#{workflowController.close()}" />

		<ui:fragment
			rendered="#{!empty workflowController.workitem.item['txtworkflowhistory']}">
			<h:panelGrid columns="3">
				<h:outputLabel value="#{message.created}: " />
				<h:outputText
					value="#{workflowController.workitem.item['$created']} ">
					<f:convertDateTime timeZone="CET" type="both" dateStyle="medium" />
				</h:outputText>
				<h:outputText
					value=" #{message.by} #{workflowController.workitem.item['namcreator']} " />
				<h:outputLabel value="#{message.modified}: " />
				<h:outputText
					value="#{workflowController.workitem.item['$modified']} ">
					<f:convertDateTime timeZone="CET" type="both" dateStyle="medium" />
				</h:outputText>
				<h:outputText
					value=" #{message.by} #{workflowController.workitem.item['namcurrenteditor']}" />
			</h:panelGrid>

			<h3>History:</h3>
			<div>

				<h:dataTable var="log"
					value="#{workflowController.workitem.itemListArray['txtworkflowhistory']}">
					<h:column>
						<h:outputText value="#{log[0]}">
							<f:convertDateTime timeZone="#{message.timeZone}" type="both"
								pattern="#{message.dateTimePattern}" />
						</h:outputText>
					</h:column>
					<h:column>
						<h:outputText value="#{log[1]}" />
					</h:column>
				</h:dataTable>
			</div>
		</ui:fragment>


	</div>



</f:subview>

